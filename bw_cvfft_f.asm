//********************************************************************************************
//支持任意点数cfft（64-128k），FFT速度有折扣，结果稳定输出Out_buffer
//作者：贾光帅
//日期：2018-1-29

//函数原型：
//    //void bw_cfft(float * Input,float * Twiddles,float * Output,unsigned int m);
//参数说明：
//cfft_all：
//Input      输入数据
//Twid       旋转因子
//Output     输出buffer
//m          点数
//函数输出说明：
//本函数的最终结果输出在output上，但是牺牲了部分效率，具体牺牲效率对比如下：
//点数            fast版本                                      output版本
//64点            126                      149
//128点           235                      235
//256点           329                      329
//512点           711                      902
//1K点            1247                     1630
//2K点            2863                     2863
//4K点            5519                     5519
//8K点            12911                   15982
//16K点           25583                   31726
//32K点           59151                   59151
//64K点           118031                  118031
//128K点          268591                  317740


//********************************************************
//修订：贾光帅于20180328补充增加8、16、32点的fft代码，保障FFT运行点数为8-128K点
//**********************************************************
//*************************************************************
.global __bw_cfft
M .assigna 87381
L .assigna 5
//.section .text1,  "ax", @progbits
.text
__bw_cfft:
xr63=8
.code_align 16
if xr3==r63 b _bw_fft_8 ||xr63=16    ////执行8点

.code_align 16
if xr3==r63 b _bw_fft_16 ||xr63=32    ////执行16点


.code_align 16
if xr3==r63 b _bw_fft_32     ////执行32点
.code_align 16
b _fft_start
_bw_fft_8:
u4=u0+2||xr1=u2
u2=u0+6||xfr0=0.707107
u3=u0+4
xr15:14=[u4+=8,1]//1
||v0=xr1
xr17:16=[u4+=8,1]//5
xr19:18=[u2+=8,1]//3
xr21:20=[u2+=8,1]//7
||v1=v0+4
xr7:6  =[u0+=8,1]//0
||xcfr15:14_17:16=cfr15:14+/-cfr17:16//1&5
xr9:8  =[u0+=8,1]//4
||v2=v0+2
xr11:10=[u3+=8,1]//2
||xcfr19:18_21:20=cfr19:18+/-cfr21:20//3&7
xr13:12=[u3+=8,1]//6
||v3=v0+6
xcfr7:6_9:8=cfr7:6+/-cfr9:8//0&4
xcfr15:14_19:18=cfr15:14+/-cfr19:18//1&3
||xcfr17:16=cfr17:16-jcfr21:20||xcfr21:20=cfr17:16+jcfr21:20//5&7
xcfr11:10_13:12=cfr11:10+/-cfr13:12//2&6
nop
xcfr17:16=cfr17:16*fr0||xcfr21:20=cfr21:20*fr0//5*twid<2>,7*twid<2>
xcfr7:6_11:10=cfr7:6+/-cfr11:10//0&2
||xcfr9:8=cfr9:8-jcfr13:12||xcfr13:12=cfr9:8+jcfr13:12//4&6
nop
xfr17=fr17+fr16||xfr16=fr16-fr17//5*twid<2>合并
||xfr21=fr20-fr21||xfr20=fr21+fr20//7*twid<2>合并(-xfr20)
xcfr7:6_15:14=cfr7:6+/-cfr15:14//0&1
||xcfr11:10=cfr11:10-jcfr19:18||xcfr19:18=cfr11:10+jcfr19:18//2&3
nop
xcfr9:8_17:16=cfr9:8+/-cfr17:16//4&5
||xfr13=fr13+fr21||xfr12=fr12-fr20||xfr21=fr13-fr21||xfr20=fr12+fr20//6&7
[v0+=8,1]=xr7:6
[v0+=8,1]=xr15:14
[v1+=8,1]=xr11:10
[v1+=8,1]=xr19:18
[v2+=8,1]=xr9:8
[v2+=8,1]=xr17:16
[v3+=8,1]=xr13:12
[v3+=8,1]=xr21:20
.code_align 16
b _fft_end

_bw_fft_16:
u4=u0+16

r11:10=[u4+=8,1]//8,9,10,11
r13:12=[u4+=8,1]//12,13,14,15
r7:6=[u0+=8,1]//0,1,2,3
r9:8=[u0+=8,1]//4,5,6,7
nop
cfr7:6_11:10=cfr7:6+/-cfr11:10//0&8
cfr9:8_13:12=cfr9:8+/-cfr13:12//4&12
nop
nop
cfr7:6_9:8=cfr7:6+/-cfr9:8//0&4
||cfr11:10=cfr11:10-jcfr13:12||cfr13:12=cfr11:10+jcfr13:12//4&12
fr3=0.707107
fr4=0
/*yr11:10=zr9:8||zr9:8=yr11:10||xr13:12=tr7:6||tr7:6=xr13:12

xr9:8=yr7:6||yr7:6=xr9:8||zr13:12=tr11:10||tr11:10=zr13:12
tr9:8=yr13:12||yr13:12=tr9:8||zr7:6=xr11:10||xr11:10=zr7:6*/

yr9:8=zr11:10||zr11:10=yr9:8||xr13:12=tr7:6||tr7:6=xr13:12
xr11:10=yr7:6||yr7:6=xr11:10||zr13:12=tr9:8||tr9:8=zr13:12
tr11:10=yr13:12||yr13:12=tr11:10||zr7:6=xr9:8||xr9:8=zr7:6


ycfr9:8=cfr9:8*fr3//10*twid
||zfr9=fr8+fr4||zfr8=fr4-fr9//6*twid(-j),合并

tcfr9:8=cfr9:8*fr3//14*twid
||zfr13=fr12+fr4||zfr12=fr4-fr13//7*twid(-j),合并

ycfr13:12=cfr13:12*fr3//11*twid
||tcfr13:12=cfr13:12*fr3//15*twid

yfr9=fr9+fr8||yfr8=fr8-fr9//10*twid,合并
tfr9=fr8-fr9||tfr8=fr9+fr8//14*twid,合并
r1:0=[u1+=16,2]

yfr13=fr13+fr12||yfr12=fr12-fr13//11*twid,合并
||tfr13=fr12-fr13||tfr12=fr13+fr12//15*twid,合并
r3:2=[u1+=16,2]

xyzcfr7:6_9:8=cfr7:6+/-cfr9:8//(xyz)0&2
tfr7=fr7+fr9||tfr6=fr6-fr8||tfr9=fr7-fr9||tfr8=fr6+fr8//(t)0&2

xyzcfr11:10_13:12=cfr11:10+/-cfr13:12//(xyz)1&3
tfr11=fr11+fr13||tfr10=fr10-fr12||tfr13=fr11-fr13||tfr12=fr10+fr12//(t)1&3
nop
nop
qfr11:10_1:0=cfr11:10*cfr1:0//1*twid
||qfr13:12_3:2=cfr13:12*cfr3:2//3*twid
nop
nop
fr11=fr11-fr1||fr10=fr10+fr0//1*twid,合并
||fr13=fr13-fr3||fr12=fr12+fr2//3*twid,合并
nop
nop
cfr7:6_11:10=cfr7:6+/-cfr11:10//0&1
||cfr9:8_13:12=cfr9:8+/-cfr13:12//2&3
nop
nop
[u2+=8,1]=r7:6
[u2+=8,1]=r9:8
[u2+=8,1]=r11:10
[u2+=8,1]=r13:12

.code_align 16
b _fft_end


_bw_fft_32:
u4=1||xr0=u2||u3=u0+4
u5=1||xr63=u1
// the first stage
//r31:30第三级第二个旋转因子;r33:32第三级第四个旋转因子
        r15:14 = br(L)[u3 += u4,u5]//4
        ||fr3=0.707107
        r17:16 = br(L)[u3 += u4,u5]//20
        ||v0=xr0
        r19:18 = br(L)[u3 += u4,u5]//12
        r21:20 = br(L)[u3 += u4,u5]//28
	    r7:6   = br(L)[u0 += u4,u5]//0
	    ||cfr15:14_17:16=cfr15:14+/-cfr17:16//4&20
	    ||v1=v0+32
        r9:8   = br(L)[u0 += u4,u5]//16
        ||v2=v0+16
        r11:10 = br(L)[u0 += u4,u5]//8
        ||cfr19:18_21:20=cfr19:18+/-cfr21:20//12&28
        r13:12 = br(L)[u0 += u4,u5]//24
        v3=v0+48
		cfr7:6_9:8=cfr7:6+/-cfr9:8//0&16
		cfr15:14=cfr15:14+cfr19:18||cfr19:18=cfr15:14-cfr19:18//4&12
		||cfr17:16=cfr17:16-jcfr21:20||cfr21:20=cfr17:16+jcfr21:20//20&28
		cfr11:10_13:12=cfr11:10+/-cfr13:12//8&24
		nop
		cfr17:16=cfr17:16*fr3||cfr21:20=cfr21:20*fr3//20*twid,28*twid
		cfr7:6=cfr7:6+cfr11:10||cfr11:10=cfr7:6-cfr11:10//0&8
		||cfr9:8=cfr9:8-jcfr13:12||cfr13:12=cfr9:8+jcfr13:12//16&24

		r3:2=[u1+=16,2]//从第5级的旋转因子文件按中读取第四级的旋转因子

		fr17=fr17+fr16||fr16=fr16-fr17
		||fr21=fr20-fr21||fr20=fr21+fr20//20*twid,28*twid合并

		cfr7:6_15:14=cfr7:6+/-cfr15:14//0&4
		||cfr11:10=cfr11:10-jcfr19:18||cfr19:18=cfr11:10+jcfr19:18//8&12

		r5:4=[u1+=16,2]//从第5级的旋转因子文件按中读取第四级的旋转因子

		cfr9:8=cfr9:8+cfr17:16||cfr17:16=cfr9:8-cfr17:16//16&20
		||fr13=fr13+fr21||fr12=fr12-fr20||fr21=fr13-fr21||fr20=fr12+fr20//24&28

		/*利用宏间将所有数据调整到顺序输出的位置
		位反序读入如下图：                                                   调整如下：
		X     Y     Z    T                X    Y    Z    T
		0     1     2    3                0    16   8    24
		16    17    18   19               1    17   9    25
		8     9     10   11               2    18   10   26
		24    25    26   27               3    19   11   27


		4     5     6    7                4    20   12   28
		20    21    22   23               5    21   13   29
		12    13    14   15               6    22   14   30
		28    29    30   31               7    23   15   31*/
		yr7:6=xr9:8||xr9:8=yr7:6||tr11:10=zr13:12||zr13:12=tr11:10
		xr11:10=zr7:6||zr7:6=xr11:10||yr13:12=tr9:8||tr9:8=yr13:12
		xr13:12=tr7:6||tr7:6=xr13:12||yr11:10=zr9:8||zr9:8=yr11:10

		yr15:14=xr17:16||xr17:16=yr15:14||tr19:18=zr21:20||zr21:20=tr19:18
		xr19:18=zr15:14||zr15:14=xr19:18||tr17:16=yr21:20||yr21:20=tr17:16

		qfr33:30=cfr11:10*cfr3:2//2*twid
		||qfr37:34=cfr13:12*cfr3:2//3*twid

		xr21:20=tr15:14||tr15:14=xr21:20||zr17:16=yr19:18||yr19:18=zr17:16
		u1=xr63

		fr11=fr33-fr30||fr10=fr31+fr32//2*twid乘完合并
		||fr13=fr37-fr34||fr12=fr35+fr36//3*twid乘完合并

		qfr33:30=cfr19:18*cfr5:4//6*twid
		||qfr37:34=cfr21:20*cfr5:4//7*twid

		r1:0=[u1+=8,1]//读入第五级0~4个旋转因子
		cfr7:6_11:10=cfr7:6+/-cfr11:10//0&2
		||cfr9:8_13:12=cfr9:8+/-cfr13:12//1&3
		||r3:2=[u1+=8,1]//读入第五级5~8个旋转因子

		fr19=fr33-fr30||fr18=fr31+fr32//6*twid乘完合并
		||fr21=fr37-fr34||fr20=fr35+fr36//7*twid乘完合并
		||r5:4=[u1+=8,1]//读入第五级9~12个旋转因子

		r25:24=[u1+=8,1]//读入第五级13~16个旋转因子

		qfr9:8_1:0=cfr9:8*cfr1:0//1*twid<5>

		cfr15:14_19:18=cfr15:14+/-cfr19:18//4&6
		||cfr17:16_21:20=cfr17:16+/-cfr21:20//5&7
		||qfr13:12_5:4=cfr13:12*cfr5:4//3*twid
		nop
		fr9=fr9-fr1||fr8=fr8+fr0//1*twid<5>,合并

		fr13=fr13-fr5||fr12=fr12+fr4//3*twid,合并
		||qfr17:16_3:2=cfr17:16*cfr3:2//5*twid

		qfr21:20_25:24=cfr21:20*cfr25:24//7*twid

		cfr7:6_9:8=cfr7:6+/-cfr9:8//0&1

		cfr11:10_13:12=cfr11:10+/-cfr13:12//2&3
		||fr17=fr17-fr3||fr16=fr16+fr2//5*twid,合并

		fr21=fr21-fr25||fr20=fr20+fr24//7*twid,合并

		[v0+=8,1]=r7:6//写回0

		[v1+=8,1]=r9:8//写回1
		||cfr15:14_17:16=cfr15:14+/-cfr17:16//4&5

		[v2+=8,1]=r11:10//写回2
		||cfr19:18_21:20=cfr19:18+/-cfr21:20//6&7

		[v3+=8,1]=r13:12//写回3

		[v0+=8,1]=r15:14//4
		[v1+=8,1]=r17:16//5
		[v2+=8,1]=r19:18//6
		[v3+=8,1]=r21:20//7
.code_align 16
b _fft_end

_fft_start:
//-------------------------push------------------------------
u8=u8+-1
[u8+=-8,-1]=r63:62||xr0=u10||yr0=u11||zr0=u12||tr0=u13
[u8+=-8,-1]=r61:60||xr1=u14||yr1=u15||zr1=v8||tr1=v9
[u8+=-8,-1]=r59:58||xr2=v10||yr2=v11||zr2=v12||tr2=v13
[u8+=-8,-1]=r57:56||xr4=v14||yr4=v15||zr4=w8||tr4=w9
[u8+=-8,-1]=r55:54||xr5=w10||yr5=w11||zr5=w12||tr5=w13
[u8+=-8,-1]=r53:52||xr6=w14||yr6=w15
[u8+=-8,-1]=r51:50
[u8+=-8,-1]=r49:48
[u8+=-8,-1]=r47:46
[u8+=-8,-1]=r45:44
[u8+=-8,-1]=r43:42
[u8+=-8,-1]=r41:40
[u8+=-8,-1]=r1:0
[u8+=-8,-1]=r3:2
[u8+=-7,-1]=r5:4
[u8+=-2,-1]=xyr6||xr63=64
//------------------------------------------------------------

u10=1||v10=4||u11=1||xr8=r3 pos1||yr1=u2
xr7=r3 lshift -2||xr0=u1||xr1=u2||w15=xr3//////////////////////w14 save xr3
/////////////////////v13 save the address of output,w13 save the address of the twiddles
//*******************************************************************************************//
_cfft4:
u12=13||xr4=r3 lshift -6||u6=u0+12||w13=xr0||v0=xr1||xr6=r8||zr1=u0

fr0=0.7071067811865475244008443621<BB>||v12=28||u7=xr8||xr6-=4

r31:30=br(u7)[u6+=u10,u11]
||fr1=0.92387953251128675612818319<BB>									//r34:cos(-pi/8)
||fr2=-0.38268343236508977172846<BB>
||lc1=xr4
||u4=u0+8
||w0=w13+0
||u13=xr1/////////////////////u13 save the address of output
||xr7+=1

r33:32=br(u7)[u6+=u10,u11]
||fr0=0.7071067811865475244008443621
||fr3=1.0
||xr6+=1
||u5=u0+9
||v1=v0+2
||w10=w13+0
||v13=zr1

r35:34=br(u7)[u6+=u10,u11]
||u2=u0+4
||v2=v0+8
||v11=xr7
||fr3=1.0<BB>

r37:36=br(u7)[u6+=u12,u11]
||u3=u0+5
||v3=v0+10
||xr6=r6 lshift -1


r23:22=br(u7)[u4+=u10,u11]
||cfr31:30_33:32=cfr31:30+/-cfr33:32
||u1=u0+1
||v4=v0+16

r25:24=br(u7)[u4+=u10,u11]
||v5=v0+18
||w4=xr6


r27:26=br(u7)[u4+=u10,u11]
||cfr35:34_37:36=cfr35:34+/-cfr37:36
||v6=v0+24

r29:28=br(u7)[u4+=u12,u11]
||v7=v0+26
||lc0=xr6


r15:14=br(u7)[u2+=u10,u11]
||cfr23:22_25:24=cfr23:22+/-cfr25:24
||u14=32
||v14=32


r17:16=br(u7)[u2+=u10,u11]
||cfr33:32=cfr33:32-jcfr37:36//<2>r33:32
||cfr37:36=cfr33:32+jcfr37:36////<2>r37:36
||w12=32
||w14=64
||cfr31:30_35:34=cfr31:30+/-cfr35:34///////////////////<2>r31:30////<2>r35:34



r19:18=br(u7)[u2+=u10,u11]
||u15=96
||v15=96
||cfr27:26_29:28=cfr27:26+/-cfr29:28

r21:20=br(u7)[u2+=u12,u11]
||w5=8
||w6=1
||cfr33:32=cfr33:32*fr0||cfr37:36=cfr37:36*fr0



r7:6=br(u7)[u0+=u10,u11]
||cfr15:14_17:16=cfr15:14+/-cfr17:16


r9:8=br(u7)[u0+=u10,u11]
||cfr25:24=cfr25:24-jcfr29:28//////////<2>r25:24
||cfr29:28=cfr25:24+jcfr29:28//////<2>r29:28
||cfr23:22_27:26=cfr23:22+/-cfr27:26////////////////<2>r23:22//<2>27:26


r11:10=br(u7)[u0+=u10,u11]
||cfr19:18_21:20=cfr19:18+/-cfr21:20
||fr57=fr33+fr32||fr56=fr32-fr33////<2>r33:32*exp(-j*pi/4)
||fr37=fr36-fr37||fr36=fr37+fr36////<2>r37:36*exp(-j*3*pi/4)=r37:(-r36)


r13:12=br(u7)[u0+=u12,u11]


r31:30=br(u7)[u6+=u10,u11]
||cfr27:26=cfr27:26-jcfr35:34<BA>///<3>r27:26==r51:50
||cfr35:34=cfr27:26+jcfr35:34<BA>//<3>r35:34==r59:58
||cfr23:22=cfr23:22+cfr31:30<BA>//////////////////////////////////////<3>r23:22==r47:46
||cfr31:30=cfr23:22-cfr31:30<BA>//////////////////////////////////////<3>r31:30==r55:54

r33:32=br(u7)[u6+=u10,u11]
||cfr15:14_19:18=cfr15:14+/-cfr19:18////////////////////////<2>r15:14////<2>r19:18
||cfr17:16=cfr17:16-jcfr21:20/////////<2>r17:16
||cfr21:20=cfr17:16+jcfr21:20///////<2>r21:20


r35:34=br(u7)[u6+=u10,u11]
||cfr7:6_9:8=cfr7:6+/-cfr9:8
||cfr11:10_13:12=cfr11:10+/-cfr13:12
||cfr35:34=cfr35:34*fr0<BB>||cfr27:26=cfr27:26*fr0<BB>

r37:36=br(u7)[u6+=u12,u11]
||cfr25:24=cfr25:24+cfr57:56<BA>//////////<3>r25:24==r49:48
||cfr33:32=cfr25:24-cfr57:56<BA>//////////<3>r33:32==r57:56
||fr29=fr29+fr37<BA>||fr28=fr28-fr36<BA>////////<3>r29:28==r53:52
||fr37=fr29-fr37<BA>||fr36=fr28+fr36<BA>////////<3>r37:36==61:60
||cfr17:16=cfr17:16*fr0||cfr21:20=cfr21:20*fr0
//||xBB,yBB,zBB,tBB

r23:22=br(u7)[u4+=u10,u11]
||cfr31:30_33:32=cfr31:30+/-cfr33:32
||fr35=fr34-fr35<BB>||fr34=fr34+fr35<BB>////r59:58*exp(-j*3*pi/4)=r59:(-r58)
||fr27=fr26+fr27<BB>||fr26=fr26-fr27<BB>/////r51:50==r27:26*exp(-j*pi/4)

r25:24=br(u7)[u4+=u10,u11]
||cfr57:56=cfr33:32*fr2<BB>||fr5=fr32*fr1<BB>||fr4=fr33*fr1<BB>
||cfr49:48=cfr25:24*fr1<BB>||fr63=fr24*fr2<BB>||fr62=fr25*fr2<BB>
||cfr7:6_11:10=cfr7:6+/-cfr11:10//////////////////////<2>r7:6/////<2>r11:10
||fr41=fr17+fr16||fr40=fr16-fr17///<2>r17:16*exp(-j*pi/4)
||fr45=fr20-fr21||fr44=fr21+fr20///<2>r21:20*exp(-j*3*pi/4)==r21:(-r20)
||r43:42=r19:18

r27:26=br(u7)[u4+=u10,u11]
||fr53=fr28*fr1<BB>||fr29=fr29*fr2<BB>||fr52=fr29*fr1<BB>||fr28=fr28*fr2<BB>
||cfr61:60=cfr37:36*fr1<BB>||cfr37:36=cfr37:36*fr2<BB>
||cfr35:34_37:36=cfr35:34+/-cfr37:36
||cfr47:46=cfr9:8-jcfr13:12/////////////////<2>r9:8
||cfr13:12=cfr9:8+jcfr13:12///////////////<2>r13:12

r29:28=br(u7)[u4+=u12,u11]
||fr25=fr49-fr63<BB>||fr24=fr48+fr62<BB>////////////////////r49:48==r25:24*exp(-j*pi/8)
||fr33=fr57+fr5<BB>||fr32=fr56-fr4<BB>/////////////////////r57:56==r33:32*exp(-j*5*pi/8)
||r39:38=r15:14

r15:14=br(u7)[u2+=u10,u11]
||cfr23:22_25:24=cfr23:22+/-cfr25:24
||fr37=fr61+fr36<BB>||fr36=fr37-fr60<BB>///////////////r61:60==(-r37):r36*exp(-j*7*pi/8)
||fr29=fr53-fr29<BB>||fr28=fr28+fr52<BB>//////////////r53:52==r29:(-r28)

r17:16=br(u7)[u2+=u10,u11]
||cfr31:30_35:34=cfr31:30+/-cfr35:34//////////////////////////////<2>r31:30////<2>r35:34
||cfr33:32=cfr33:32-jcfr37:36//////////<2>r33:32
||cfr37:36=cfr33:32+jcfr37:36//////////<2>r37:36

r19:18=br(u7)[u2+=u10,u11]
||cfr27:26_29:28=cfr27:26+/-cfr29:28
||cfr7:6=cfr7:6+cfr39:38<BA>/////////////////////////////////<3>r7:6
||cfr15:14=cfr7:6-cfr39:38<BA>///////////////////////////////<3>r15:14==r39:38



r21:20=br(u7)[u2+=u12,u11]
||cfr11:10=cfr11:10-jcfr43:42<BA>/////<3>r11:10
||cfr19:18=cfr11:10+jcfr43:42<BA>/////<3>r19:18==r43:42
||cfr33:32=cfr33:32*fr0||cfr37:36=cfr37:36*fr0
||cfr9:8=cfr47:46+cfr41:40<BA>//////////////////////////<3>r9:8
||cfr17:16=cfr47:46-cfr41:40<BA>//////////////////////////<3>r17:16==r41:40

r7:6=br(u7)[u0+=u10,u11]
||cfr15:14_17:16=cfr15:14+/-cfr17:16
||fr13=fr13+fr45<BA>||fr12=fr12-fr44<BA>//////////////////<3>r13:12
||fr21=fr13-fr45<BA>||fr20=fr12+fr44<BA>///////////////////<3>r21:20==r45:44


r9:8=br(u7)[u0+=u10,u11]
||cfr25:24=cfr25:24-jcfr29:28//////////<2>r25:24
||cfr29:28=cfr25:24+jcfr29:28//////<2>r29:28
||cfr23:22_27:26=cfr23:22+/-cfr27:26////////////////<2>r23:22//<2>27:26


r11:10=br(u7)[u0+=u10,u11]
||fr57=fr33+fr32||fr56=fr32-fr33////<2>r33:32*exp(-j*pi/4)
||fr37=fr36-fr37||fr36=fr37+fr36////<2>r37:36*exp(-j*3*pi/4)=r37:(-r36)
||cfr7:6=cfr7:6+cfr23:22<BB>||cfr47:46=cfr7:6-cfr23:22<BB>///////////////////////////<4>r7:6//<4>r23:22==r47:46


r13:12=br(u7)[u0+=u12,u11]
||cfr19:18_21:20=cfr19:18+/-cfr21:20
||cfr15:14=cfr15:14-jcfr31:30<BB>/////<4>r15:14==r39:38
||cfr55:54=cfr15:14+jcfr31:30<BB>//////<4>r31:30==r55:54



cfr11:10=cfr11:10+cfr27:26<BB>||cfr51:50=cfr11:10-cfr27:26<BB>///////////////////<4>r11:10//<4>r27:26==r51:50
||fr19=fr19+fr35<BB>||fr18=fr18-fr34<BB>///////<4>r19:18==r43:42
||fr59=fr19-fr35<BB>||fr58=fr18+fr34<BB>///////<4>r35:34==r59:58

cfr9:8=cfr9:8+cfr25:24<BB>||cfr49:48=cfr9:8-cfr25:24<BB>/////////////////////<4>r9:8///<4>r25:24==r49:48
||cfr17:16=cfr17:16+cfr33:32<BB>||cfr57:56=cfr17:16-cfr33:32<BB>////////////<4>r17:16==r41:40//<4>r33:32==r57:56

fr13=fr13+fr29<BB>||fr12=fr12-fr28<BB>//////<4>r13:12
||fr53=fr13-fr29<BB>||fr52=fr12+fr28<BB>////<4>r29:28==r53:52
||fr21=fr21-fr37<BB>||fr20=fr20+fr36<BB>///////<4>r21:20==r45:44
||fr61=fr21+fr37<BB>||fr60=fr20-fr36<BB>///////<4>r37:36==r61:60

r31:30=br(u7)[u6+=u10,u11]
||cfr27:26=cfr27:26-jcfr35:34<BA>///<3>r27:26==r51:50
||cfr35:34=cfr27:26+jcfr35:34<BA>//<3>r35:34==r59:58
||cfr23:22=cfr23:22+cfr31:30<BA>//////////////////////////////////////<3>r23:22==r47:46
||cfr31:30=cfr23:22-cfr31:30<BA>//////////////////////////////////////<3>r31:30==r55:54

_cfftloop4:///*********************************************************************************
.code_align 16
m[v0+=v10,v11]=xr7:6yr9:8zr11:10tr13:12<BB>
||r33:32=br(u7)[u6+=u10,u11]
||cfr15:14_19:18=cfr15:14+/-cfr19:18////////////////////////<2>r15:14////<2>r19:18
||cfr17:16=cfr17:16-jcfr21:20/////////<2>r17:16
||cfr21:20=cfr17:16+jcfr21:20///////<2>r21:20

m[v1+=v10,v11]=xr9:8yr11:10zr13:12tr7:6<BB>
||r35:34=br(u7)[u6+=u10,u11]
||cfr7:6_9:8=cfr7:6+/-cfr9:8
||cfr11:10_13:12=cfr11:10+/-cfr13:12
||cfr35:34=cfr35:34*fr0<BB>||cfr27:26=cfr27:26*fr0<BB>

m[v0+=v12,v11]=xr11:10yr13:12zr7:6tr9:8<BB>
||r37:36=br(u7)[u6+=u12,u11]
||cfr25:24=cfr25:24+cfr57:56<BA>//////////<3>r25:24==r49:48
||cfr33:32=cfr25:24-cfr57:56<BA>//////////<3>r33:32==r57:56
||fr29=fr29+fr37<BA>||fr28=fr28-fr36<BA>////////<3>r29:28==r53:52
||fr37=fr29-fr37<BA>||fr36=fr28+fr36<BA>////////<3>r37:36==61:60
||cfr17:16=cfr17:16*fr0||cfr21:20=cfr21:20*fr0
//||xBB,yBB,zBB,tBB

m[v1+=v12,v11]=xr13:12yr7:6zr9:8tr11:10<BB>
||r23:22=br(u7)[u4+=u10,u11]
||cfr31:30_33:32=cfr31:30+/-cfr33:32
||fr35=fr34-fr35<BB>||fr34=fr34+fr35<BB>////r59:58*exp(-j*3*pi/4)=r59:(-r58)
||fr27=fr26+fr27<BB>||fr26=fr26-fr27<BB>/////r51:50==r27:26*exp(-j*pi/4)


m[v4+=v10,v11]=xr47:46yr49:48zr51:50tr53:52<BB>
||r25:24=br(u7)[u4+=u10,u11]
||cfr45:44=cfr33:32*fr2<BB>||cfr5:4=cfr33:32*fr1<BB>
||cfr25:24=cfr25:24*fr1<BB>||cfr63:62=cfr25:24*fr2<BB>
||cfr7:6_11:10=cfr7:6+/-cfr11:10//////////////////////<2>r7:6/////<2>r11:10
||fr41=fr17+fr16||fr40=fr16-fr17///<2>r17:16*exp(-j*pi/4)
||fr45=fr20-fr21||fr44=fr21+fr20///<2>r21:20*exp(-j*3*pi/4)==r21:(-r20)
||r43:42=r19:18

m[v5+=v10,v11]=xr49:48yr51:50zr53:52tr47:46<BB>
||r27:26=br(u7)[u4+=u10,u11]
||fr43=fr28*fr1<BB>||fr29=fr29*fr2<BB>||fr42=fr29*fr1<BB>||fr28=fr28*fr2<BB>
||cfr7:6=cfr37:36*fr1<BB>||cfr37:36=cfr37:36*fr2<BB>
||cfr35:34_37:36=cfr35:34+/-cfr37:36
||cfr47:46=cfr9:8-jcfr13:12/////////////////<2>r9:8
||cfr13:12=cfr9:8+jcfr13:12///////////////<2>r13:12

m[v4+=v12,v11]=xr51:50yr53:52zr47:46tr49:48<BB>
||r29:28=br(u7)[u4+=u12,u11]
||fr25=fr25-fr62<BB>||fr24=fr24+fr63<BB>////////////////////r49:48==r25:24*exp(-j*pi/8)
||fr33=fr45+fr4<BB>||fr32=fr44-fr5<BB>/////////////////////r57:56==r33:32*exp(-j*5*pi/8)

m[v5+=v12,v11]=xr53:52yr47:46zr49:48tr51:50<BB>
||r15:14=br(u7)[u2+=u10,u11]
||cfr23:22_25:24=cfr23:22+/-cfr25:24
||fr37=fr7+fr36<BB>||fr36=fr37-fr6<BB>///////////////r61:60==(-r37):r36*exp(-j*7*pi/8)
||fr29=fr43-fr29<BB>||fr28=fr28+fr42<BB>//////////////r53:52==r29:(-r28)
||r39:38=r15:14

m[v2+=v10,v11]=xr15:14yr17:16zr19:18tr21:20<BB>
||r17:16=br(u7)[u2+=u10,u11]
||cfr31:30_35:34=cfr31:30+/-cfr35:34//////////////////////////////<2>r31:30////<2>r35:34
||cfr33:32=cfr33:32-jcfr37:36//////////<2>r33:32
||cfr37:36=cfr33:32+jcfr37:36//////////<2>r37:36

m[v3+=v10,v11]=xr17:16yr19:18zr21:20tr15:14<BB>
||r19:18=br(u7)[u2+=u10,u11]
||cfr27:26_29:28=cfr27:26+/-cfr29:28
||cfr7:6=cfr7:6+cfr39:38<BA>/////////////////////////////////<3>r7:6
||cfr47:46=cfr7:6-cfr39:38<BA>///////////////////////////////<3>r15:14==r47:46

m[v2+=v12,v11]=xr19:18yr21:20zr15:14tr17:16<BB>
||r21:20=br(u7)[u2+=u12,u11]
||cfr11:10=cfr11:10-jcfr43:42<BA>/////<3>r11:10
||cfr43:42=cfr11:10+jcfr43:42<BA>/////<3>r19:18==r43:42
||cfr33:32=cfr33:32*fr0||cfr37:36=cfr37:36*fr0
||cfr9:8=cfr47:46+cfr41:40<BA>//////////////////////////<3>r9:8
||cfr49:48=cfr47:46-cfr41:40<BA>//////////////////////////<3>r17:16==r49:48

m[v3+=v12,v11]=xr21:20yr15:14zr17:16tr19:18<BB>
||r7:6=br(u7)[u0+=u10,u11]
||cfr15:14_17:16=cfr15:14+/-cfr17:16
||fr13=fr13+fr45<BA>||fr12=fr12-fr44<BA>//////////////////<3>r13:12
||fr21=fr13-fr45<BA>||fr20=fr12+fr44<BA>///////////////////<3>r21:20==r45:44


m[v6+=v10,v11]=xr55:54yr57:56zr59:58tr61:60<BB>
||r9:8=br(u7)[u0+=u10,u11]
||cfr25:24=cfr25:24-jcfr29:28//////////<2>r25:24
||cfr29:28=cfr25:24+jcfr29:28//////<2>r29:28
||cfr23:22_27:26=cfr23:22+/-cfr27:26////////////////<2>r23:22//<2>27:26


m[v7+=v10,v11]=xr57:56yr59:58zr61:60tr55:54<BB>
||r11:10=br(u7)[u0+=u10,u11]
||fr57=fr33+fr32||fr56=fr32-fr33////<2>r33:32*exp(-j*pi/4)
||fr37=fr36-fr37||fr36=fr37+fr36////<2>r37:36*exp(-j*3*pi/4)=r37:(-r36)
||cfr7:6=cfr7:6+cfr23:22<BB>||cfr47:46=cfr7:6-cfr23:22<BB>///////////////////////////<4>r7:6//<4>r23:22==r47:46
||cfr23:22=cfr47:46*fr3<BB>
||r5:4 = r49:48<BB>
.code_align 16
m[v6+=v12,v11]=xr59:58yr61:60zr55:54tr57:56<BB>
||r13:12=br(u7)[u0+=u12,u11]
||cfr19:18_21:20=cfr19:18+/-cfr21:20
||cfr11:10=cfr11:10+cfr27:26<BB>||cfr51:50=cfr11:10-cfr27:26<BB>///////////////////<4>r11:10//<4>r27:26==r51:50

m[v7+=v12,v11]=xr61:60yr55:54zr57:56tr59:58<BB>
||cfr15:14=cfr23:22-jcfr31:30<BB>/////<4>r15:14==r47:46
||cfr55:54=cfr23:22+jcfr31:30<BB>//////<4>r31:30==r55:54
||fr19=fr43+fr35<BB>||fr18=fr42-fr34<BB>///////<4>r19:18==r43:42
||fr59=fr43-fr35<BB>||fr58=fr42+fr34<BB>///////<4>r35:34==r59:58

cfr9:8=cfr9:8+cfr25:24<BB>||cfr49:48=cfr9:8-cfr25:24<BB>/////////////////////<4>r9:8///<4>r25:24==r49:48
||fr13=fr13+fr29<BB>||fr12=fr12-fr28<BB>//////<4>r13:12
||fr53=fr13-fr29<BB>||fr52=fr12+fr28<BB>////<4>r29:28==r53:52

cfr17:16=cfr5:4+cfr33:32<BB>||cfr57:56=cfr5:4-cfr33:32<BB>////////////<4>r17:16==r41:40//<4>r33:32==r57:56
||fr21=fr21-fr37<BB>||fr20=fr20+fr36<BB>///////<4>r21:20==r45:44
||fr61=fr21+fr37<BB>||fr60=fr20-fr36<BB>///////<4>r37:36==r61:60

.code_align 4
if lc1 b _cfftloop4
||r31:30=br(u7)[u6+=u10,u11]
||cfr27:26=cfr27:26-jcfr35:34<BA>///<3>r27:26==r51:50
||cfr35:34=cfr27:26+jcfr35:34<BA>//<3>r35:34==r59:58
||cfr23:22=cfr23:22+cfr31:30<BA>//////////////////////////////////////<3>r23:22==r47:46
||cfr31:30=cfr23:22-cfr31:30<BA>//////////////////////////////////////<3>r31:30==r55:54




u11=1||v11=1
||xr1=M||xr0=0
||u0=u13+0||v0=v13+0
||xr3=w15////xr3=n
||w11=w12+w14


u12=128||v12=128
||yr4=4||w7=0
||tr4=w4
||u1=u13+u14||v1=v13+v14

u10=8||v10=8
||u3=u13+u15
||v3=v13+v15
||xr4=r3 ashift -7//////xr4=n/128
||w2=w0+w12///u14=v14=32,u15=v15=96,u12=v12=128
||xr1=r1 & r3
.code_align 16
if nlc0 b _cfftlast||u2=u1+u14||v2=v1+v14||tr4-=1
//若n=6，则跳转到最后一次循环
.code_align 16
 if xr1>r0 b _cfft2stage//若n为2的偶次幂，且大于6则按指定跳转
 _cfft1://n为2的奇次幂时，先做一次基2，在做后面的处理
u4=40
||v4=40
||w10=-24
||xr5=r3 lshift -5
||r7:6=[u1+=u10,u11]
||r11:10=[w0+=w5,w6]

u14=64
||v14=64
||r9:8=[u0+=u10,u11]

u15=192
||v15=192
||r13:12=[u1+=u10,u11]
||r17:16=[w0+=w5,w6]


w12=64
||w14=128
||r15:14=[u0+=u10,u11]
||cfr7:6=cfr7:6*fr11
||cfr11:10=cfr7:6*fr10
||lc1=xr5

r19:18=[u1+=u10,u11]
||r23:22=[w0+=w5,w6]


r21:20=[u0+=u10,u11]
||cfr13:12=cfr13:12*fr17
||cfr17:16=cfr13:12*fr16
||fr7=fr7-fr10||fr6=fr6+fr11

r25:24=[u1+=u4,u11]
||r29:28=[w0+=w10,w6]

r27:26=[u0+=u4,u11]
||cfr19:18=cfr19:18*fr23
||cfr23:22=cfr19:18*fr22
||fr13=fr13-fr16||fr12=fr12+fr17


r7:6=[u1+=u10,u11]
||r11:10=[w0+=w5,w6]
||cfr31:30=cfr9:8+cfr7:6
||cfr33:32=cfr9:8-cfr7:6

r9:8=[u0+=u10,u11]
||cfr25:24=cfr25:24*fr29
||cfr29:28=cfr25:24*fr28
||fr19=fr19-fr22||fr18=fr18+fr23

r13:12=[u1+=u10,u11]
||r17:16=[w0+=w5,w6]
||cfr35:34=cfr15:14+cfr13:12
||cfr37:36=cfr15:14-cfr13:12


_cfft1loop:

[v0+=v10,v11]=r31:30
||r15:14=[u0+=u10,u11]
||fr25=fr25-fr28||fr24=fr24+fr29
||cfr7:6=cfr7:6*fr11
||cfr11:10=cfr7:6*fr10

[v1+=v10,v11]=r33:32
||r19:18=[u1+=u10,u11]
||r23:22=[w0+=w5,w6]
||cfr41:40=cfr21:20+cfr19:18
||cfr43:42=cfr21:20-cfr19:18


[v0+=v10,v11]=r35:34
||r21:20=[u0+=u10,u11]
||cfr13:12=cfr13:12*fr17
||cfr17:16=cfr13:12*fr16
||fr7=fr7-fr10||fr6=fr6+fr11



[v1+=v10,v11]=r37:36
||r25:24=[u1+=u4,u11]
||r29:28=[w0+=w10,w6]
||cfr45:44=cfr27:26+cfr25:24
||cfr47:46=cfr27:26-cfr25:24


[v0+=v10,v11]=r41:40
||r27:26=[u0+=u4,u11]
||fr13=fr13-fr16||fr12=fr12+fr17
||cfr19:18=cfr19:18*fr23
||cfr23:22=cfr19:18*fr22


[v1+=v10,v11]=r43:42
||r7:6=[u1+=u10,u11]
||r11:10=[w0+=w5,w6]
||cfr31:30=cfr9:8+cfr7:6
||cfr33:32=cfr9:8-cfr7:6


[v0+=v4,v11]=r45:44
||r9:8=[u0+=u10,u11]
||cfr25:24=cfr25:24*fr29
||cfr29:28=cfr25:24*fr28
||fr19=fr19-fr22||fr18=fr18+fr23

.code_align 16
if lc1 b _cfft1loop
||[v1+=v4,v11]=r47:46
||r13:12=[u1+=u10,u11]
||r17:16=[w0+=w5,w6]
||cfr35:34=cfr15:14+cfr13:12
||cfr37:36=cfr15:14-cfr13:12


zr0=u13||tr0=v13
u13=tr0||v13=zr0

u0=u13+0||v0=v13+0
||w0=w13+32

.code_align 16
u12=256||v12=256
||yr4=8||w7=0
||u1=u13+u14
||v1=v13+v14
||w11=w12+w14

u3=u13+u15
||v3=v13+v15
||xr4=r3 ashift -8//////xr4=n/256
||w2=w0+w12///u14=v14=32,u15=v15=96,u12=v12=128

.code_align 16
if nlc0 b _cfftlast||w10=w0+0||u2=u1+u14||v2=v1+v14||tr4-=1

_cfft2stage:
r7:6=[u3+=u10,u11]||r11:10=[w0+=w5,w6]//1
||u7=u3+u12||v7=v3+v12
||lc0=xr4
||yr4-=3
||w3=w0+w14

r9:8=[u1+=u10,u11]//2
||u5=u1+u12||v5=v1+v12

r13:12=[u2+=u10,u11]||r17:16=[w2+=w5,w6]<BB>//3
||u6=u2+u12||v6=v2+v12


r15:14=[u0+=u10,u11]||r19:18=[w3+=w5,w6]<BB>//4
||fr7=fr7*fr11||fr33=fr6*fr10||fr6=fr6*fr11||fr32=fr7*fr10
||u4=u0+u12||v4=v0+v12
||lc1=yr4

r21:20=[u7+=u10,u11]//5
||fr9=fr9*fr11||fr35=fr8*fr10||fr8=fr8*fr11||fr34=fr9*fr10
||u14=u15+u12||v14=v15+v12

r23:22=[u5+=u10,u11]//6
||fr7=fr7-fr33||fr6=fr6+fr32
||tr3=u12

r25:24=[u6+=u10,u11]//7
||fr9=fr9-fr35||fr8=fr8+fr34



u14=u14+u10||v14=v14+v10//8
||r27:26=[u4+=u10,u11]
||fr21=fr21*fr11||fr29=fr20*fr10||fr20=fr20*fr11||fr28=fr21*fr10


r7:6=[u3+=u10,u11]//9
||r11:10=[w0+=w5,w6]
||fr23=fr23*fr11||fr31=fr22*fr10||fr22=fr22*fr11||fr30=fr23*fr10
||cfr13:12_7:6=cfr13:12+/-cfr7:6<BA>
||u12=u14-u10



r9:8=[u1+=u10,u11]//10
||fr21=fr21-fr29||fr20=fr20+fr28
||cfr43:42=cfr15:14+cfr9:8<BA>
||cfr41:40=cfr15:14-cfr9:8<BA>





r13:12=[u2+=u10,u11]//11
||fr23=fr23-fr31||fr22=fr22+fr30





r15:14=[u0+=u10,u11]//12
||fr37=fr7*fr19<BB>||fr35=fr6*fr18<BB>||fr36=fr6*fr19<BB>||fr34=fr7*fr18<BB>
||fr7=fr7*fr11||fr35=fr6*fr10||fr6=fr6*fr11||fr34=fr7*fr10






r21:20=[u7+=u10,u11]//13
||fr39=fr13*fr17<BB>||fr33=fr12*fr16<BB>||fr38=fr12*fr17<BB>||fr32=fr13*fr16<BB>
||fr9=fr9*fr11||fr33=fr8*fr10||fr8=fr8*fr11||fr32=fr9*fr10
||cfr47:46=cfr25:24+cfr21:20<BA>
||cfr45:44=cfr25:24-cfr21:20<BA>
||r63:62=r11:10




r23:22=[u5+=u10,u11]//14
||fr37=fr37-fr35<BB>||fr36=fr36+fr34<BB>//////////////r7:6
||fr7=fr7-fr35||fr6=fr6+fr34
||cfr51:50=cfr27:26+cfr23:22<BA>
||cfr55:54=cfr27:26-cfr23:22<BA>


r25:24=[u6+=u10,u11]//15
||r11:10=[w0+=w5,w6]
||fr39=fr39-fr33<BB>||fr38=fr38+fr32<BB>//////////////r13:12
||fr9=fr9-fr33||fr8=fr8+fr32


r27:26=[u4+=u10,u11]//16
||r17:16=[w2+=w5,w6]<BB>
||fr47=fr47*fr17<BB>||fr29=fr46*fr16<BB>||fr46=fr46*fr17<BB>||fr28=fr47*fr16<BB>
||cfr21:20=cfr21:20*fr63||cfr29:28=cfr21:20*fr62
||r33:32=r43:42<BB>

r7:6=[u3+=u10,u11]//17
||r19:18=[w3+=w5,w6]<BB>
||fr45=fr45*fr19<BB>||fr30=fr44*fr18<BB>||fr44=fr44*fr19<BB>||fr31=fr45*fr18<BB>
||cfr23:22=cfr23:22*fr63||cfr31:30=cfr23:22*fr62
||cfr9:8   = cfr41:40+cfr37:36<BB>
||cfr11:10 = cfr41:40-cfr37:36<BB>
||cfr13:12_7:6=cfr13:12+/-cfr7:6<BA>


r9:8=[u1+=u10,u11]//18
||fr47=fr47-fr29<BB>||fr46=fr46+fr28<BB>
||cfr21:20=cfr21:20+jcfr29:28
||cfr41:40=cfr15:14-cfr9:8<BA>
||cfr43:42=cfr15:14+cfr9:8<BA>

r13:12=[u2+=u10,u11]//19
||fr45=fr45-fr30<BB>||fr44=fr44+fr31<BB>
||cfr23:22=cfr23:22+jcfr31:30
||cfr53:52=cfr33:32+cfr39:38<BB>
||cfr63:62=cfr33:32-cfr39:38<BB>

//*************************************************************************//
_cfft2loop:
.code_align 16
r15:14=[u0+=u10,u11]//1
||cfr37:36=cfr7:6*fr19<BB>||cfr35:34=cfr7:6*fr18<BB>
||fr7=fr7*fr11||fr35=fr6*fr10||fr6=fr6*fr11||fr34=fr7*fr10
||[v1+=v10,v11]=r9:8<BB>
||r31:30=r55:54<BB>

r21:20=[u7+=u10,u11]//2
||cfr39:38=cfr13:12*fr17<BB>||cfr33:32=cfr13:12*fr16<BB>
||fr9=fr9*fr11||fr33=fr8*fr10||fr8=fr8*fr11||fr32=fr9*fr10
||cfr59:58=cfr51:50+cfr47:46<BB>
||cfr61:60=cfr51:50-cfr47:46<BB>
||cfr25:24=cfr25:24+cfr21:20<BA>
||cfr21:20=cfr25:24-cfr21:20<BA>
||[v3+=v10,v11]=r11:10<BB>
||r63:62=r11:10


r23:22=[u5+=u10,u11]//3
||cfr37:36=cfr37:36+jcfr35:34<BB>
||fr7=fr7-fr35||fr6=fr6+fr34
||cfr51:50=cfr27:26+cfr23:22<BA>
||cfr55:54=cfr27:26-cfr23:22<BA>
||[v0+=v10,v11]=r53:52<BB>

r25:24=[u6+=u10,u11]//4
||r11:10=[w0+=w5,w6]
||cfr39:38=cfr39:38+jcfr33:32<BB>
||fr9=fr9-fr33||fr8=fr8+fr32
||cfr49:48=cfr31:30+cfr45:44<BB>
||cfr45:44=cfr31:30-cfr45:44<BB>
||[v2+=v10,v11]=r63:62<BB>


r27:26=[u4+=u10,u11]//5
||r17:16=[w2+=w5,w6]<BB>
||cfr47:46=cfr25:24*fr17<BB>||cfr29:28=cfr25:24*fr16<BB>
||cfr21:20=cfr21:20*fr63||cfr29:28=cfr21:20*fr62
||[v4+=v10,v11]=r59:58<BB>
||r33:32=r43:42<BB>
//*************************************************************************************//
r7:6=[u3+=u10,u11]//6
||r19:18=[w3+=w5,w6]<BB>
||cfr21:20=cfr21:20*fr19<BB>||cfr31:30=cfr21:20*fr18<BB>
||cfr23:22=cfr23:22*fr63||cfr31:30=cfr23:22*fr62
||cfr9:8   = cfr41:40+cfr37:36<BB>
||cfr11:10 = cfr41:40-cfr37:36<BB>
||cfr13:12_7:6=cfr13:12+/-cfr7:6<BA>
||[v6+=v10,v11]=r61:60<BB>

r9:8=[u1+=u10,u11]//7
||fr47=fr47-fr28<BB>||fr46=fr46+fr29<BB>
||cfr21:20=cfr21:20+jcfr29:28
||cfr41:40=cfr15:14-cfr9:8<BA>
||cfr43:42=cfr15:14+cfr9:8<BA>
||[v7+=v10,v11]=r45:44<BB>

.code_align 16
if lc1 b _cfft2loop
||r13:12=[u2+=u10,u11]//8
||fr45=fr21-fr30<BB>||fr44=fr20+fr31<BB>
||cfr23:22=cfr23:22+jcfr31:30
||cfr53:52=cfr33:32+cfr39:38<BB>
||cfr63:62=cfr33:32-cfr39:38<BB>
||[v5+=v10,v11]=r49:48<BB>

r15:14=[u0+=u14,u11]//1
||cfr37:36=cfr7:6*fr19<BB>||cfr35:34=cfr7:6*fr18<BB>
||fr7=fr7*fr11||fr35=fr6*fr10||fr6=fr6*fr11||fr34=fr7*fr10
||[v1+=v10,v11]=r9:8<BB>
||r31:30=r55:54<BB>
||lc1=yr4

r21:20=[u7+=u14,u11]//2
||cfr39:38=cfr13:12*fr17<BB>||cfr33:32=cfr13:12*fr16<BB>
||fr9=fr9*fr11||fr33=fr8*fr10||fr8=fr8*fr11||fr32=fr9*fr10
||cfr59:58=cfr51:50+cfr47:46<BB>
||cfr61:60=cfr51:50-cfr47:46<BB>
||cfr25:24=cfr25:24+cfr21:20<BA>
||cfr21:20=cfr25:24-cfr21:20<BA>
||[v3+=v10,v11]=r11:10<BB>
||r63:62=r11:10

r23:22=[u5+=u14,u11]//3
||cfr37:36=cfr37:36+jcfr35:34<BB>
||fr7=fr7-fr35||fr6=fr6+fr34
||cfr51:50=cfr27:26+cfr23:22<BA>
||cfr55:54=cfr27:26-cfr23:22<BA>
||[v0+=v10,v11]=r53:52<BB>

r25:24=[u6+=u14,u11]//4
||r11:10=[w10+=w7,w6]
||cfr39:38=cfr39:38+jcfr33:32<BB>
||fr9=fr9-fr33||fr8=fr8+fr32
||cfr49:48=cfr31:30+cfr45:44<BB>
||cfr45:44=cfr31:30-cfr45:44<BB>
||[v2+=v10,v11]=r63:62<BB>


r27:26=[u4+=u14,u11]//5
||r17:16=[w2+=w5,w6]<BB>
||cfr47:46=cfr25:24*fr17<BB>||cfr29:28=cfr25:24*fr16<BB>
||cfr21:20=cfr21:20*fr63||cfr29:28=cfr21:20*fr62
||[v4+=v10,v11]=r59:58<BB>
||r33:32=r43:42<BB>
//*************************************************************************************//
r7:6=[u3+u12,u11]//6
||r19:18=[w3+=w5,w6]<BB>
||cfr21:20=cfr21:20*fr19<BB>||cfr31:30=cfr21:20*fr18<BB>
||cfr23:22=cfr23:22*fr63||cfr31:30=cfr23:22*fr62
||cfr9:8   = cfr41:40+cfr37:36<BB>
||cfr11:10 = cfr41:40-cfr37:36<BB>
||cfr13:12_7:6=cfr13:12+/-cfr7:6<BA>
||[v6+=v10,v11]=r61:60<BB>
||w0=w10+w5||u3=u3+u14

r9:8=[u1+u12,u11]//7
||fr47=fr47-fr28<BB>||fr46=fr46+fr29<BB>
||cfr21:20=cfr21:20+jcfr29:28
||cfr41:40=cfr15:14-cfr9:8<BA>
||cfr43:42=cfr15:14+cfr9:8<BA>
||[v7+=v10,v11]=r45:44<BB>
||u1=u1+u14

r13:12=[u2+u12,u11]//8
||fr45=fr21-fr30<BB>||fr44=fr20+fr31<BB>
||cfr23:22=cfr23:22+jcfr31:30
||cfr53:52=cfr33:32+cfr39:38<BB>
||cfr63:62=cfr33:32-cfr39:38<BB>
||[v5+=v10,v11]=r49:48<BB>
||u2=u2+u14

r15:14=[u0+=u10,u11]//1
||cfr37:36=cfr7:6*fr19<BB>||cfr35:34=cfr7:6*fr18<BB>
||fr7=fr7*fr11||fr35=fr6*fr10||fr6=fr6*fr11||fr34=fr7*fr10
||[v1+=v10,v11]=r9:8<BB>
||r31:30=r55:54<BB>
||w2=w10+w12

r21:20=[u7+=u10,u11]//2
||cfr39:38=cfr13:12*fr17<BB>||cfr33:32=cfr13:12*fr16<BB>
||fr9=fr9*fr11||fr33=fr8*fr10||fr8=fr8*fr11||fr32=fr9*fr10
||cfr59:58=cfr51:50+cfr47:46<BB>
||cfr61:60=cfr51:50-cfr47:46<BB>
||cfr25:24=cfr25:24+cfr21:20<BA>
||cfr21:20=cfr25:24-cfr21:20<BA>
||[v3+=v10,v11]=r11:10<BB>
||w3=w10+w14
||r63:62=r11:10


r23:22=[u5+=u10,u11]//3
||cfr37:36=cfr37:36+jcfr35:34<BB>
||fr7=fr7-fr35||fr6=fr6+fr34
||cfr51:50=cfr27:26+cfr23:22<BA>
||cfr55:54=cfr27:26-cfr23:22<BA>
||[v0+=v10,v11]=r53:52<BB>

r25:24=[u6+=u10,u11]//4
||r11:10=[w0+=w5,w6]
||cfr39:38=cfr39:38+jcfr33:32<BB>
||fr9=fr9-fr33||fr8=fr8+fr32
||cfr49:48=cfr31:30+cfr45:44<BB>
||cfr45:44=cfr31:30-cfr45:44<BB>
||[v2+=v10,v11]=r63:62<BB>


r27:26=[u4+=u10,u11]//5
||r17:16=[w2+=w5,w6]<BB>
||cfr47:46=cfr25:24*fr17<BB>||cfr29:28=cfr25:24*fr16<BB>
||cfr21:20=cfr21:20*fr63||cfr29:28=cfr21:20*fr62
||[v4+=v10,v11]=r59:58<BB>
||r33:32=r43:42<BB>
//*************************************************************************************//
r7:6=[u3+=u10,u11]//6
||r19:18=[w3+=w5,w6]<BB>
||cfr21:20=cfr21:20*fr19<BB>||cfr31:30=cfr21:20*fr18<BB>
||cfr23:22=cfr23:22*fr63||cfr31:30=cfr23:22*fr62
||cfr9:8   = cfr41:40+cfr37:36<BB>
||cfr11:10 = cfr41:40-cfr37:36<BB>
||cfr13:12_7:6=cfr13:12+/-cfr7:6<BA>
||[v6+=v10,v11]=r61:60<BB>

r9:8=[u1+=u10,u11]//7
||fr47=fr47-fr28<BB>||fr46=fr46+fr29<BB>
||cfr21:20=cfr21:20+jcfr29:28
||cfr41:40=cfr15:14-cfr9:8<BA>
||cfr43:42=cfr15:14+cfr9:8<BA>
||[v7+=v10,v11]=r45:44<BB>


r13:12=[u2+=u10,u11]//8
||fr45=fr21-fr30<BB>||fr44=fr20+fr31<BB>
||cfr23:22=cfr23:22+jcfr31:30
||cfr53:52=cfr33:32+cfr39:38<BB>
||cfr63:62=cfr33:32-cfr39:38<BB>
||[v5+=v10,v11]=r49:48<BB>

r15:14=[u0+=u10,u11]//1
||cfr37:36=cfr7:6*fr19<BB>||cfr35:34=cfr7:6*fr18<BB>
||fr7=fr7*fr11||fr35=fr6*fr10||fr6=fr6*fr11||fr34=fr7*fr10
||[v1+=v14,v11]=r9:8<BB>
||r31:30=r55:54<BB>


r21:20=[u7+=u10,u11]//2
||cfr39:38=cfr13:12*fr17<BB>||cfr33:32=cfr13:12*fr16<BB>
||fr9=fr9*fr11||fr33=fr8*fr10||fr8=fr8*fr11||fr32=fr9*fr10
||cfr59:58=cfr51:50+cfr47:46<BB>
||cfr61:60=cfr51:50-cfr47:46<BB>
||cfr25:24=cfr25:24+cfr21:20<BA>
||cfr21:20=cfr25:24-cfr21:20<BA>
||[v3+=v14,v11]=r11:10<BB>
||r63:62=r11:10


r23:22=[u5+=u10,u11]//3
||cfr37:36=cfr37:36+jcfr35:34<BB>
||fr7=fr7-fr35||fr6=fr6+fr34
||cfr51:50=cfr27:26+cfr23:22<BA>
||cfr55:54=cfr27:26-cfr23:22<BA>
||[v0+=v14,v11]=r53:52<BB>

r25:24=[u6+=u10,u11]//4
||r11:10=[w0+=w5,w6]
||cfr39:38=cfr39:38+jcfr33:32<BB>
||fr9=fr9-fr33||fr8=fr8+fr32
||cfr49:48=cfr31:30+cfr45:44<BB>
||cfr45:44=cfr31:30-cfr45:44<BB>
||[v2+=v14,v11]=r63:62<BB>


r27:26=[u4+=u10,u11]//5
||r17:16=[w2+=w5,w6]<BB>
||cfr47:46=cfr25:24*fr17<BB>||cfr29:28=cfr25:24*fr16<BB>
||cfr21:20=cfr21:20*fr63||cfr29:28=cfr21:20*fr62
||[v4+=v14,v11]=r59:58<BB>
||r33:32=r43:42<BB>
//*************************************************************************************//
r7:6=[u3+=u10,u11]//6
||r19:18=[w3+=w5,w6]<BB>
||cfr21:20=cfr21:20*fr19<BB>||cfr31:30=cfr21:20*fr18<BB>
||cfr23:22=cfr23:22*fr63||cfr31:30=cfr23:22*fr62
||cfr9:8   = cfr41:40+cfr37:36<BB>
||cfr11:10 = cfr41:40-cfr37:36<BB>
||cfr13:12_7:6=cfr13:12+/-cfr7:6<BA>
||[v6+=v14,v11]=r61:60<BB>

r9:8=[u1+=u10,u11]//7
||fr47=fr47-fr28<BB>||fr46=fr46+fr29<BB>
||cfr21:20=cfr21:20+jcfr29:28
||cfr41:40=cfr15:14-cfr9:8<BA>
||cfr43:42=cfr15:14+cfr9:8<BA>
||[v7+=v14,v11]=r45:44<BB>


.code_align 16
if lc0 b _cfft2loop
||r13:12=[u2+=u10,u11]//8
||fr45=fr21-fr30<BB>||fr44=fr20+fr31<BB>
||cfr23:22=cfr23:22+jcfr31:30
||cfr53:52=cfr33:32+cfr39:38<BB>
||cfr63:62=cfr33:32-cfr39:38<BB>
||[v5+=v14,v11]=r49:48<BB>

zr0=u13||tr0=v13
u13=tr0||v13=zr0||u12=tr3

yr4+=3||u0=u13+0||v0=v13+0||w0=w10+w11||lc1=tr4
u15=u15 ashift 2||v15=v15 ashift 2||w10=w10+w11||xr4=r4 lshift -2
u1=u13+u12||v1=v13+v12||w12=w12 ashift 2
.code_align 16
u3=u13+u15||v3=v13+v15||yr4=r4 lshift 2||w14=w14 ashift 2///u14=v14=32,u15=v15=96,u12=v12=128
u2=u1+u12||v2=v1+v12||w2=w0+w12
.code_align 16
if lc1 b _cfft2stage
||u12=u12 ashift 2||v12=v12 ashift 2||w11=w12+w14||tr4-=1

_cfftlast:
r7:6=[u3+=u10,u11]//1
||r11:10=[w0+=w5,w6]
||fr1=fr1-fr1
||fr0=fr0-fr0
||w3=w0+w14
||v0=yr1||v12=v12 ashift -2

xr5=r3 lshift -5
||r9:8=[u2+=u10,u11]//2

r13:12=[u1+=u10,u11]||r17:16=[w2+=w5,w6]<BB>//3


r15:14=[u0+=u10,u11]//4
||r19:18=[w3+=w5,w6]<BB>
||fr7=fr7*fr11||fr33=fr6*fr10||fr6=fr6*fr11||fr32=fr7*fr10


r21:20=[u3+=u10,u11]//5
||r11:10=[w0+=w5,w6]
||fr9=fr9*fr11||fr35=fr8*fr10||fr8=fr8*fr11||fr34=fr9*fr10
||lc1=xr5
||v1=v0+v12

r23:22=[u2+=u10,u11]//6
||fr7=fr7-fr33||fr6=fr6+fr32




r25:24=[u1+=u10,u11]//7
||fr9=fr9-fr35||fr8=fr8+fr34
||v3=v0+v15

r27:26=[u0+=u10,u11]//8
||fr21=fr21*fr11||fr29=fr20*fr10||fr20=fr20*fr11||fr28=fr21*fr10
||v2=v1+v12

r7:6=[u3+=u10,u11]//9
||r11:10=[w0+=w5,w6]
||fr23=fr23*fr11||fr31=fr22*fr10||fr22=fr22*fr11||fr30=fr23*fr10
||cfr13:12_7:6=cfr13:12+/-cfr7:6<BA>

r9:8=[u2+=u10,u11]//10
||fr21=fr21-fr29||fr20=fr20+fr28
||cfr43:42=cfr15:14+cfr9:8<BA>
||cfr41:40=cfr15:14-cfr9:8<BA>

r13:12=[u1+=u10,u11]//11
||fr23=fr23-fr31||fr22=fr22+fr30
||r63:62=[w0+=w5,w6]

r15:14=[u0+=u10,u11]//12
||fr37=fr7*fr19<BB>||fr35=fr6*fr18<BB>||fr36=fr6*fr19<BB>||fr34=fr7*fr18<BB>
||fr7=fr7*fr11||fr35=fr6*fr10||fr6=fr6*fr11||fr34=fr7*fr10
||r19:18=[w3+=w5,w6]<BB>

r21:20=[u3+=u10,u11]//13
||r17:16=[w2+=w5,w6]<BB>
||fr39=fr13*fr17<BB>||fr33=fr12*fr16<BB>||fr38=fr12*fr17<BB>||fr32=fr13*fr16<BB>
||fr9=fr9*fr11||fr33=fr8*fr10||fr8=fr8*fr11||fr32=fr9*fr10
||cfr47:46=cfr25:24+cfr21:20<BA>
||cfr45:44=cfr25:24-cfr21:20<BA>

r23:22=[u2+=u10,u11]//14
||r11:10=[w0+=w5,w6]
||fr37=fr37-fr35<BB>||fr36=fr36+fr34<BB>//////////////r7:6
||fr7=fr7-fr35||fr6=fr6+fr34
||cfr51:50=cfr27:26+cfr23:22<BA>
||cfr55:54=cfr27:26-cfr23:22<BA>

r25:24=[u1+=u10,u11]//15
||fr39=fr39-fr33<BB>||fr38=fr38+fr32<BB>//////////////r13:12
||fr9=fr9-fr33||fr8=fr8+fr32

r27:26=[u0+=u10,u11]//16
||fr47=fr47*fr17<BB>||fr29=fr46*fr16<BB>||fr46=fr46*fr17<BB>||fr28=fr47*fr16<BB>
||cfr21:20=cfr21:20*fr63||cfr29:28=cfr21:20*fr62
||r33:32=r43:42<BB>
||r17:16=[w2+=w5,w6]<BB>

r7:6=[u3+=u10,u11]//17
||r19:18=[w3+=w5,w6]<BB>
||fr45=fr45*fr19<BB>||fr30=fr44*fr18<BB>||fr44=fr44*fr19<BB>||fr31=fr45*fr18<BB>
||cfr23:22=cfr23:22*fr63||cfr31:30=cfr23:22*fr62
||cfr9:8   = cfr41:40+cfr37:36<BB>
||cfr11:10 = cfr41:40-cfr37:36<BB>
||cfr13:12_7:6=cfr13:12+/-cfr7:6<BA>

r9:8=[u2+=u10,u11]//18
||r63:62=[w0+=w5,w6]
||fr47=fr47-fr29<BB>||fr46=fr46+fr28<BB>
||cfr21:20=cfr21:20+jcfr29:28
||cfr41:40=cfr15:14-cfr9:8<BA>
||cfr43:42=cfr15:14+cfr9:8<BA>

r13:12=[u1+=u10,u11]//19
||fr45=fr45-fr30<BB>||fr44=fr44+fr31<BB>
||cfr23:22=cfr23:22+jcfr31:30
||cfr53:52=cfr33:32+cfr39:38<BB>
||cfr63:62=cfr33:32-cfr39:38<BB>
//*************************************************************************//
_cfftlastloop:
.code_align 16
r15:14=[u0+=u10,u11]//1
||r19:18=[w3+=w5,w6]<BB>
||cfr37:36=cfr7:6*fr19<BB>||cfr35:34=cfr7:6*fr18<BB>
||fr7=fr7*fr11||fr35=fr6*fr10||fr6=fr6*fr11||fr34=fr7*fr10
||[v1+=v10,v11]=r9:8<BB>
||r31:30=r55:54<BB>

r21:20=[u3+=u10,u11]//2
||cfr39:38=cfr13:12*fr17<BB>||cfr33:32=cfr13:12*fr16<BB>
||fr9=fr9*fr11||fr33=fr8*fr10||fr8=fr8*fr11||fr32=fr9*fr10
||cfr59:58=cfr51:50+cfr47:46<BB>
||cfr61:60=cfr51:50-cfr47:46<BB>
||cfr25:24=cfr25:24+cfr21:20<BA>
||cfr21:20=cfr25:24-cfr21:20<BA>
||[v3+=v10,v11]=r11:10<BB>
||r17:16=[w2+=w5,w6]<BB>


r23:22=[u2+=u10,u11]//3
||r11:10=[w0+=w5,w6]
||cfr37:36=cfr37:36+jcfr35:34<BB>
||fr7=fr7-fr35||fr6=fr6+fr34
||cfr51:50=cfr27:26+cfr23:22<BA>
||cfr55:54=cfr27:26-cfr23:22<BA>
||[v0+=v10,v11]=r53:52<BB>

r25:24=[u1+=u10,u11]//4
||cfr39:38=cfr39:38+jcfr33:32<BB>
||fr9=fr9-fr33||fr8=fr8+fr32
||cfr49:48=cfr31:30+cfr45:44<BB>
||cfr45:44=cfr31:30-cfr45:44<BB>
||[v2+=v10,v11]=r63:62<BB>


r27:26=[u0+=u10,u11]//5
||r17:16=[w2+=w5,w6]<BB>
||cfr47:46=cfr25:24*fr17<BB>||cfr29:28=cfr25:24*fr16<BB>
||cfr21:20=cfr21:20*fr63||cfr29:28=cfr21:20*fr62
||[v0+=v10,v11]=r59:58<BB>
||r33:32=r43:42<BB>
//*************************************************************************************//
r7:6=[u3+=u10,u11]//6
||r19:18=[w3+=w5,w6]<BB>
||cfr21:20=cfr21:20*fr19<BB>||cfr31:30=cfr21:20*fr18<BB>
||cfr23:22=cfr23:22*fr63||cfr31:30=cfr23:22*fr62
||cfr9:8   = cfr41:40+cfr37:36<BB>
||cfr11:10 = cfr41:40-cfr37:36<BB>
||cfr13:12_7:6=cfr13:12+/-cfr7:6<BA>
||[v2+=v10,v11]=r61:60<BB>

r9:8=[u2+=u10,u11]//7
||r63:62=[w0+=w5,w6]
||fr47=fr47-fr28<BB>||fr46=fr46+fr29<BB>
||cfr21:20=cfr21:20+jcfr29:28
||cfr41:40=cfr15:14-cfr9:8<BA>
||cfr43:42=cfr15:14+cfr9:8<BA>
||[v3+=v10,v11]=r45:44<BB>

.code_align 16
if lc1 b _cfftlastloop
||r13:12=[u1+=u10,u11]//8
||fr45=fr21-fr30<BB>||fr44=fr20+fr31<BB>
||cfr23:22=cfr23:22+jcfr31:30
||cfr53:52=cfr33:32+cfr39:38<BB>
||cfr63:62=cfr33:32-cfr39:38<BB>
||[v1+=v10,v11]=r49:48<BB>




_cfftexit:
//----------------------------pop-------------------------------
xyr6=[u8+2,-1]||u8=u8+2
r5:4=[u8+7,-1]||u8=u8+7
r3:2=[u8+8,-1]||u8=u8+8
r1:0=[u8+8,-1]||u8=u8+8
r41:40=[u8+8,-1]||u8=u8+8
r43:42=[u8+8,-1]||u8=u8+8
r45:44=[u8+8,-1]||u8=u8+8
r47:46=[u8+8,-1]||u8=u8+8
r49:48=[u8+8,-1]||u8=u8+8
r51:50=[u8+8,-1]||u8=u8+8
r53:52=[u8+8,-1]||u8=u8+8||w14=xr6||w15=yr6
r55:54=[u8+8,-1]||u8=u8+8||w10=xr5||w11=yr5||w12=zr5||w13=tr5
r57:56=[u8+8,-1]||u8=u8+8||v14=xr4||v15=yr4||w8=zr4||w9=tr4
r59:58=[u8+8,-1]||u8=u8+8||v10=xr2||v11=yr2||v12=zr2||v13=tr2
r61:60=[u8+8,-1]||u8=u8+8||u14=xr1||u15=yr1||v8=zr1||v9=tr1
r63:62=[u8+8,-1]||u8=u8+8||u10=xr0||u11=yr0||u12=zr0||u13=tr0
u8=u8+1
//------------------------------------------------------------
nop
rtrap 23
nop

_fft_end:

.code_align 16
ret


